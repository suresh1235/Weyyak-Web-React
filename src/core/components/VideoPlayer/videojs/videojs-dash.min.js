/* eslint-disable */
/**
 * videojs-contrib-dash
 * @version 2.9.1
 * @copyright 2017 Brightcove, Inc
 * @license Apache-2.0
 */
!function (e) { if ("object" == typeof exports && "undefined" != typeof module) module.exports = e(); else if ("function" == typeof define && define.amd) define([], e); else { ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).videojsDash = e() } }(function () { return function i(r, d, s) { function l(a, e) { if (!d[a]) { if (!r[a]) { var t = "function" == typeof require && require; if (!e && t) return t(a, !0); if (u) return u(a, !0); var n = new Error("Cannot find module '" + a + "'"); throw n.code = "MODULE_NOT_FOUND", n } var o = d[a] = { exports: {} }; r[a][0].call(o.exports, function (e) { var t = r[a][1][e]; return l(t || e) }, o, o.exports, i, r, d, s) } return d[a].exports } for (var u = "function" == typeof require && require, e = 0; e < s.length; e++)l(s[e]); return l }({ 1: [function (e, t, n) { (function (e) { "use strict"; n.__esModule = !0, n.default = function (e, t) { e.dash.mediaPlayer.on(a.default.MediaPlayer.events.PLAYBACK_METADATA_LOADED, function (e, t) { var n = e.dash.mediaPlayer, o = n.getTracksFor("audio"), i = e.audioTracks(); function r(e) { return "dash-audio-" + e } function d(e, t) { for (var a = 0, n = 0; n < e.length; n++) { var o = e[n].index; if (r(o) === t.id) { a = n; break } } return e[a] } i.length && t.clearTracks(["audio"]); var a = n.getCurrentTrackFor("audio"); o.forEach(function (e) { var t = e.lang; e.roles && e.roles.length && (t += " (" + e.roles.join(", ") + ")"), i.addTrack(new s.default.AudioTrack({ enabled: e === a, id: r(e.index), kind: e.kind || "main", label: t, language: e.lang })) }), i.addEventListener("change", function () { for (var e = 0; e < i.length; e++) { var t = i[e]; if (t.enabled) { var a = d(o, t); n.setCurrentTrack(a) } else; } }) }.bind(null, e, t)) }; var a = t("undefined" != typeof window ? window.dashjs : "undefined" != typeof e ? e.dashjs : null), s = t("undefined" != typeof window ? window.videojs : "undefined" != typeof e ? e.videojs : null); function t(e) { return e && e.__esModule ? e : { default: e } } }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], 2: [function (e, t, a) { (function (e) { "use strict"; a.__esModule = !0, a.default = function (a, e, t) { window.VTTCue && !/\[native code\]/.test(window.VTTCue.toString()) && (window.VTTCue = !1); var n = []; if (e.featuresNativeTextTracks) return void s.default.log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash"); var o = a.dash.mediaPlayer; function i() { n.forEach(a.removeRemoteTextTrack.bind(a)), n = [] } function r(e) { e.index; var t = e.tracks; o.off(d.default.MediaPlayer.events.TEXT_TRACKS_ADDED, r), i(), t.length && (n = function (r, e, d) { var s = [], t = d.map(function (e) { return { dashTrack: e, trackConfig: { label: e.lang, language: e.lang, srclang: e.lang } } }).map(function (e) { var t = e.trackConfig, a = e.dashTrack, n = r.addRemoteTextTrack(t, !0); return s.push({ textTrack: n.track, dashTrack: a }), n }); function a() { for (var e = r.dash.mediaPlayer, o = r.textTracks(), i = -1, t = function (e) { var t = o[e]; if ("showing" === t.mode) { var a = function (e, t) { for (var a = 0; a < e.length; a++)if (t(e[a])) return e[a] }(s, function (e) { return e.textTrack === t }), n = a ? a.dashTrack : null; n && (i = d.indexOf(n)) } }, a = 0; a < o.length; a += 1)t(a); i !== e.getCurrentTextTrackIndex() && e.setTextTrack(i) } return r.textTracks().on("change", a), r.one("loadstart", function () { r.textTracks().off("change", a) }), a(), t }(a, 0, t)) } o.on(d.default.MediaPlayer.events.TEXT_TRACKS_ADDED, r), o.on(d.default.MediaPlayer.events.CAN_PLAY, function () { o.off(d.default.MediaPlayer.events.TEXT_TRACKS_ADDED, r), a.one("loadstart", i) }) }; var d = t("undefined" != typeof window ? window.dashjs : "undefined" != typeof e ? e.dashjs : null), s = t("undefined" != typeof window ? window.videojs : "undefined" != typeof e ? e.videojs : null); function t(e) { return e && e.__esModule ? e : { default: e } } }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], 3: [function (e, a, t) { (function (e) { var t; t = "undefined" != typeof window ? window : "undefined" != typeof e ? e : "undefined" != typeof self ? self : {}, a.exports = t }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], 4: [function (o, e, i) { (function (e) { "use strict"; i.__esModule = !0; var t = a(o("global/window")), r = a("undefined" != typeof window ? window.videojs : "undefined" != typeof e ? e.videojs : null), d = a("undefined" != typeof window ? window.dashjs : "undefined" != typeof e ? e.dashjs : null), s = a(o("./setup-audio-tracks")), l = a(o("./setup-text-tracks")); function a(e) { return e && e.__esModule ? e : { default: e } } var n = function () { function n(t, e, o) { var i = this; if (function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, n), o = o || e.options_, this.player = (0, r.default)(o.playerId), this.player.dash = this.player.dash || {}, this.tech_ = e, this.el_ = e.el(), this.elParent_ = this.el_.parentNode, t.src) { e.isReady_ = !1, n.updateSourceData && (r.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'), t = n.updateSourceData(t)), n.hooks("updatesource").forEach(function (e) { t = e(t) }); var a = t.src; this.keySystemOptions_ = n.buildDashJSProtData(t.keySystemOptions), this.player.dash.mediaPlayer = d.default.MediaPlayer().create(), this.mediaPlayer_ = this.player.dash.mediaPlayer, n.useVideoJSDebug && (r.default.log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'), n.useVideoJSDebug(this.mediaPlayer_)), n.beforeInitialize && (r.default.log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'), n.beforeInitialize(this.player, this.mediaPlayer_)), n.hooks("beforeinitialize").forEach(function (e) { e(i.player, i.mediaPlayer_) }), this.mediaPlayer_.initialize(), o.dash && Object.keys(o.dash).forEach(function (e) { var t, a = "set" + e.charAt(0).toUpperCase() + e.slice(1), n = o.dash[e]; i.mediaPlayer_.hasOwnProperty(a) && (r.default.log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '" + e + "' to '" + a + "'"), e = a), i.mediaPlayer_.hasOwnProperty(e) ? (Array.isArray(n) || (n = [n]), (t = i.mediaPlayer_)[e].apply(t, n)) : r.default.log.warn("Warning: dash configuration option unrecognized: " + e) }), this.mediaPlayer_.attachView(this.el_), this.mediaPlayer_.setAutoPlay(!1), s.default.call(null, this.player, e), l.default.call(null, this.player, e, o), this.mediaPlayer_.setProtectionData(this.keySystemOptions_), this.mediaPlayer_.attachSource(a), this.tech_.triggerReady() } } return n.buildDashJSProtData = function (e) { var t = {}; if (!e || !Array.isArray(e)) return null; for (var a = 0; a < e.length; a++) { var n = e[a], o = r.default.mergeOptions({}, n.options); o.licenseUrl && (o.serverURL = o.licenseUrl, delete o.licenseUrl), t[n.name] = o } return t }, n.prototype.dispose = function () { this.mediaPlayer_ && this.mediaPlayer_.reset(), this.player.dash && delete this.player.dash }, n.prototype.duration = function () { var e = this.el_.duration; return e === Number.MAX_VALUE ? 1 / 0 : e }, n.hooks = function (e, t) { return n.hooks_[e] = n.hooks_[e] || [], t && (n.hooks_[e] = n.hooks_[e].concat(t)), n.hooks_[e] }, n.hook = function (e, t) { n.hooks(e, t) }, n.removeHook = function (e, t) { var a = n.hooks(e).indexOf(t); return -1 !== a && (n.hooks_[e] = n.hooks_[e].slice(), n.hooks_[e].splice(a, 1), !0) }, n }(); n.hooks_ = {}; r.default.DashSourceHandler = function () { return { canHandleSource: function (e) { return function (t) { t = JSON.parse(JSON.stringify(t)), n.updateSourceData && (r.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'), t = n.updateSourceData(t)), n.hooks("updatesource").forEach(function (e) { t = e(t) }); var e = document.createElement("video"); return !(t.keySystemOptions && !navigator.requestMediaKeySystemAccess && !e.msSetMediaKeys) }(e) ? r.default.DashSourceHandler.canPlayType(e.type) ? "probably" : /\.mpd/i.test(e.src) ? "maybe" : "" : "" }, handleSource: function (e, t, a) { return new n(e, t, a) }, canPlayType: function (e) { return r.default.DashSourceHandler.canPlayType(e) } } }, r.default.DashSourceHandler.canPlayType = function (e) { return /^application\/dash\+xml/i.test(e) ? "probably" : "" }, t.default.MediaSource && r.default.getTech("Html5").registerSourceHandler(r.default.DashSourceHandler(), 0), r.default.Html5DashJS = n, i.default = n }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, { "./setup-audio-tracks": 1, "./setup-text-tracks": 2, "global/window": 3 }] }, {}, [4])(4) });